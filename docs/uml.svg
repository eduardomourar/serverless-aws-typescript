<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="705px" preserveAspectRatio="none" style="width:978px;height:705px;" version="1.1" viewBox="0 0 978 705" width="978px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ry2obt06vrik" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[5c4df79734c05495e986b33f05ac4967]
class OauthOptions--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="86.4141" id="OauthOptions" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="9.5" y="21"/><ellipse cx="25.85" cy="37" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M26.8031,33.7813 L26.8031,40.2969 L28.5219,40.2969 C28.975,40.2969 29.1156,40.3281 29.2875,40.4531 C29.5219,40.625 29.6313,40.875 29.6313,41.1563 C29.6313,41.7188 29.2719,42 28.5219,42 L23.3813,42 C22.975,42 22.7719,41.9531 22.6156,41.8281 C22.3969,41.6719 22.2563,41.4063 22.2563,41.1563 C22.2563,40.8594 22.4125,40.5781 22.6625,40.4219 C22.8188,40.3125 22.9438,40.2969 23.3813,40.2969 L25.1,40.2969 L25.1,33.7813 L23.3813,33.7813 C22.9594,33.7813 22.7719,33.75 22.6156,33.6406 C22.3969,33.4688 22.2563,33.2188 22.2563,32.9375 C22.2563,32.6563 22.4125,32.3594 22.6625,32.2031 C22.8188,32.1094 22.9438,32.0938 23.3813,32.0938 L28.5219,32.0938 C28.975,32.0938 29.1156,32.125 29.2875,32.2344 C29.5219,32.4063 29.6313,32.6719 29.6313,32.9375 C29.6313,33.2344 29.4906,33.5156 29.225,33.6719 C29.1,33.75 28.9125,33.7813 28.5219,33.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="40.15" y="41.1543">OauthOptions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="10.5" x2="126.5" y1="53" y2="53"/><ellipse cx="20.5" cy="64" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="29.5" y="67.2104">issuer: string</text><ellipse cx="20.5" cy="76.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="29.5" y="80.0151">jwksUri: string</text><ellipse cx="20.5" cy="89.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="29.5" y="92.8198">audience: string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="10.5" x2="126.5" y1="99.4141" y2="99.4141"/><!--MD5=[3836d1f470d5a46d5e5cacea14fa2d8b]
class TokenKind--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="86.4141" id="TokenKind" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="162.5" y="21"/><ellipse cx="177.5" cy="37" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M175.7969,37.875 L175.7969,40.2969 L180.1563,40.2969 L180.1563,39.4219 C180.1563,38.9375 180.1875,38.7969 180.2969,38.6406 C180.4688,38.3906 180.7344,38.2813 181,38.2813 C181.2813,38.2813 181.5625,38.4375 181.7344,38.6875 C181.8125,38.8438 181.8438,38.9844 181.8438,39.4219 L181.8438,42 L173.8438,42 C173.4531,42 173.2188,41.9531 173.0781,41.8281 C172.8594,41.6719 172.7188,41.4219 172.7188,41.1563 C172.7188,40.8594 172.875,40.5938 173.125,40.4219 C173.2813,40.3125 173.4375,40.2969 173.8438,40.2969 L174.0938,40.2969 L174.0938,33.7813 L173.8438,33.7813 C173.4219,33.7813 173.2344,33.75 173.0781,33.6406 C172.8594,33.4688 172.7188,33.2188 172.7188,32.9375 C172.7188,32.6563 172.875,32.3594 173.125,32.2031 C173.2813,32.1094 173.4063,32.0938 173.8438,32.0938 L181.4688,32.0938 L181.4688,34.6406 C181.4688,35.1094 181.4375,35.25 181.3281,35.4219 C181.1563,35.6406 180.8906,35.7813 180.625,35.7813 C180.3438,35.7813 180.0625,35.625 179.8906,35.375 C179.8125,35.2188 179.7813,35.0469 179.7813,34.6406 L179.7813,33.7813 L175.7969,33.7813 L175.7969,36.1875 L177.25,36.1875 L177.25,36.0625 C177.25,35.6094 177.2813,35.4531 177.3906,35.2813 C177.5625,35.0625 177.8281,34.9219 178.0781,34.9219 C178.5313,34.9219 178.8438,35.2344 178.9063,35.7031 C178.9219,35.8594 178.9219,35.9063 178.9219,36.0625 L178.9219,37.9844 C178.9219,38.4375 178.8906,38.5938 178.7656,38.75 C178.6094,38.9688 178.3438,39.1094 178.0938,39.1094 C177.7969,39.1094 177.5156,38.9531 177.3594,38.7031 C177.2813,38.5469 177.25,38.3906 177.25,37.9844 L177.25,37.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="191.5" y="41.1543">TokenKind</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="163.5" x2="257.5" y1="53" y2="53"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="168.5" y="67.2104">Bearer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="168.5" y="80.0151">Basic</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="168.5" y="92.8198">ApiKey</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="163.5" x2="257.5" y1="99.4141" y2="99.4141"/><!--MD5=[d8c8cfd5ca149094f5b67f9f607a5ec7]
class Token--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="73.6094" id="Token" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="294" y="27"/><ellipse cx="329.25" cy="43" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M330.2031,39.7813 L330.2031,46.2969 L331.9219,46.2969 C332.375,46.2969 332.5156,46.3281 332.6875,46.4531 C332.9219,46.625 333.0313,46.875 333.0313,47.1563 C333.0313,47.7188 332.6719,48 331.9219,48 L326.7813,48 C326.375,48 326.1719,47.9531 326.0156,47.8281 C325.7969,47.6719 325.6563,47.4063 325.6563,47.1563 C325.6563,46.8594 325.8125,46.5781 326.0625,46.4219 C326.2188,46.3125 326.3438,46.2969 326.7813,46.2969 L328.5,46.2969 L328.5,39.7813 L326.7813,39.7813 C326.3594,39.7813 326.1719,39.75 326.0156,39.6406 C325.7969,39.4688 325.6563,39.2188 325.6563,38.9375 C325.6563,38.6563 325.8125,38.3594 326.0625,38.2031 C326.2188,38.1094 326.3438,38.0938 326.7813,38.0938 L331.9219,38.0938 C332.375,38.0938 332.5156,38.125 332.6875,38.2344 C332.9219,38.4063 333.0313,38.6719 333.0313,38.9375 C333.0313,39.2344 332.8906,39.5156 332.625,39.6719 C332.5,39.75 332.3125,39.7813 331.9219,39.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="38" x="347.75" y="47.1543">Token</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="295" x2="408" y1="59" y2="59"/><ellipse cx="305" cy="70" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="314" y="73.2104">value: string</text><ellipse cx="305" cy="82.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="314" y="86.0151">kind: TokenKind</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="295" x2="408" y1="92.6094" y2="92.6094"/><!--MD5=[5c81fa95ee66350792541ffde1a92575]
class BasicAuth--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="73.6094" id="BasicAuth" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="6" y="231"/><ellipse cx="35.4" cy="247" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M36.3531,243.7813 L36.3531,250.2969 L38.0719,250.2969 C38.525,250.2969 38.6656,250.3281 38.8375,250.4531 C39.0719,250.625 39.1813,250.875 39.1813,251.1563 C39.1813,251.7188 38.8219,252 38.0719,252 L32.9313,252 C32.525,252 32.3219,251.9531 32.1656,251.8281 C31.9469,251.6719 31.8063,251.4063 31.8063,251.1563 C31.8063,250.8594 31.9625,250.5781 32.2125,250.4219 C32.3688,250.3125 32.4938,250.2969 32.9313,250.2969 L34.65,250.2969 L34.65,243.7813 L32.9313,243.7813 C32.5094,243.7813 32.3219,243.75 32.1656,243.6406 C31.9469,243.4688 31.8063,243.2188 31.8063,242.9375 C31.8063,242.6563 31.9625,242.3594 32.2125,242.2031 C32.3688,242.1094 32.4938,242.0938 32.9313,242.0938 L38.0719,242.0938 C38.525,242.0938 38.6656,242.125 38.8375,242.2344 C39.0719,242.4063 39.1813,242.6719 39.1813,242.9375 C39.1813,243.2344 39.0406,243.5156 38.775,243.6719 C38.65,243.75 38.4625,243.7813 38.0719,243.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="61" x="52.6" y="251.1543">BasicAuth</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="130" y1="263" y2="263"/><ellipse cx="17" cy="274" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="26" y="277.2104">username: string</text><ellipse cx="17" cy="286.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="26" y="290.0151">password: string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="130" y1="296.6094" y2="296.6094"/><!--MD5=[7eba5d3b3ede8da64c68cf53733b2fc3]
class Authorizer--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="176.0469" id="Authorizer" style="stroke: #A80036; stroke-width: 1.5;" width="403" x="166" y="180"/><ellipse cx="331.75" cy="196" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M334.0938,191.6719 L334.2656,191.75 C334.4844,191.4375 334.6875,191.3438 334.9844,191.3438 C335.2813,191.3438 335.5625,191.4844 335.7188,191.75 C335.8125,191.9063 335.8281,192.0313 335.8281,192.4688 L335.8281,193.8906 C335.8281,194.3125 335.7969,194.5 335.6875,194.6563 C335.5156,194.875 335.25,195.0156 334.9844,195.0156 C334.7656,195.0156 334.5313,194.9063 334.3906,194.7656 C334.25,194.6406 334.2188,194.5156 334.1563,194.1094 C334.0625,193.7031 333.8906,193.4844 333.4063,193.2031 C332.9375,192.9531 332.3281,192.7969 331.75,192.7969 C330.0156,192.7969 328.7656,194.1094 328.7656,195.8906 L328.7656,196.9844 C328.7656,198.6875 330.0625,199.7813 332.1094,199.7813 C332.875,199.7813 333.5625,199.6563 333.9844,199.3906 C334.1719,199.2969 334.1719,199.2969 334.625,198.8125 C334.8125,198.625 335.0156,198.5469 335.2344,198.5469 C335.7031,198.5469 336.0938,198.9375 336.0938,199.3906 C336.0938,199.7813 335.7656,200.2344 335.1875,200.6406 C334.4375,201.1875 333.2813,201.4844 332.0625,201.4844 C329.1719,201.4844 327.0625,199.5938 327.0625,197.0156 L327.0625,195.8906 C327.0625,193.1719 329.0625,191.0938 331.6875,191.0938 C332.5625,191.0938 333.1563,191.2344 334.0938,191.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="352.25" y="200.1543">Authorizer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="167" x2="568" y1="212" y2="212"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="220"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="186" y="226.2104">apiKey: string</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="232.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="186" y="239.0151">oauthOptions: OauthOptions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="167" x2="568" y1="245.6094" y2="245.6094"/><ellipse cx="177" cy="256.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="377" x="186" y="259.8198">checkAuthorization(event: CustomAuthorizerEvent): Promise&lt;any&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="266.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="360" x="186" y="272.6245">getHeader(event: CustomAuthorizerEvent, name: string): string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="279.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="294" x="186" y="285.4292">extractToken(event: CustomAuthorizerEvent): Token</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="292.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="186" y="298.2339">getKey(kid: any): Promise&lt;string&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="304.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="186" y="311.0386">verifyJwtToken(token: string, cert: string): Promise&lt;any&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="317.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="259" x="186" y="323.8433">verifyScopes(payload: any): Promise&lt;string&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="330.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="296" x="186" y="336.6479">verifyBasicAuth(token: string): Promise&lt;BasicAuth&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174" y="343.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="260" x="186" y="349.4526">verifyApiKey(apiKey: string): Promise&lt;string&gt;</text><!--MD5=[27a622d79b5e3fde276d234006d31317]
class MessageKind--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="73.6094" id="MessageKind" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="604.5" y="231"/><ellipse cx="619.5" cy="247" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M617.7969,247.875 L617.7969,250.2969 L622.1563,250.2969 L622.1563,249.4219 C622.1563,248.9375 622.1875,248.7969 622.2969,248.6406 C622.4688,248.3906 622.7344,248.2813 623,248.2813 C623.2813,248.2813 623.5625,248.4375 623.7344,248.6875 C623.8125,248.8438 623.8438,248.9844 623.8438,249.4219 L623.8438,252 L615.8438,252 C615.4531,252 615.2188,251.9531 615.0781,251.8281 C614.8594,251.6719 614.7188,251.4219 614.7188,251.1563 C614.7188,250.8594 614.875,250.5938 615.125,250.4219 C615.2813,250.3125 615.4375,250.2969 615.8438,250.2969 L616.0938,250.2969 L616.0938,243.7813 L615.8438,243.7813 C615.4219,243.7813 615.2344,243.75 615.0781,243.6406 C614.8594,243.4688 614.7188,243.2188 614.7188,242.9375 C614.7188,242.6563 614.875,242.3594 615.125,242.2031 C615.2813,242.1094 615.4063,242.0938 615.8438,242.0938 L623.4688,242.0938 L623.4688,244.6406 C623.4688,245.1094 623.4375,245.25 623.3281,245.4219 C623.1563,245.6406 622.8906,245.7813 622.625,245.7813 C622.3438,245.7813 622.0625,245.625 621.8906,245.375 C621.8125,245.2188 621.7813,245.0469 621.7813,244.6406 L621.7813,243.7813 L617.7969,243.7813 L617.7969,246.1875 L619.25,246.1875 L619.25,246.0625 C619.25,245.6094 619.2813,245.4531 619.3906,245.2813 C619.5625,245.0625 619.8281,244.9219 620.0781,244.9219 C620.5313,244.9219 620.8438,245.2344 620.9063,245.7031 C620.9219,245.8594 620.9219,245.9063 620.9219,246.0625 L620.9219,247.9844 C620.9219,248.4375 620.8906,248.5938 620.7656,248.75 C620.6094,248.9688 620.3438,249.1094 620.0938,249.1094 C619.7969,249.1094 619.5156,248.9531 619.3594,248.7031 C619.2813,248.5469 619.25,248.3906 619.25,247.9844 L619.25,247.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="633.5" y="251.1543">MessageKind</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="605.5" x2="717.5" y1="263" y2="263"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="610.5" y="277.2104">sms</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="610.5" y="290.0151">email</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="605.5" x2="717.5" y1="296.6094" y2="296.6094"/><!--MD5=[559ed0a6eccca9a1fa3d01b374bd6fad]
class StatusKind--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="86.4141" id="StatusKind" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="19" y="512"/><ellipse cx="34" cy="528" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M32.2969,528.875 L32.2969,531.2969 L36.6563,531.2969 L36.6563,530.4219 C36.6563,529.9375 36.6875,529.7969 36.7969,529.6406 C36.9688,529.3906 37.2344,529.2813 37.5,529.2813 C37.7813,529.2813 38.0625,529.4375 38.2344,529.6875 C38.3125,529.8438 38.3438,529.9844 38.3438,530.4219 L38.3438,533 L30.3438,533 C29.9531,533 29.7188,532.9531 29.5781,532.8281 C29.3594,532.6719 29.2188,532.4219 29.2188,532.1563 C29.2188,531.8594 29.375,531.5938 29.625,531.4219 C29.7813,531.3125 29.9375,531.2969 30.3438,531.2969 L30.5938,531.2969 L30.5938,524.7813 L30.3438,524.7813 C29.9219,524.7813 29.7344,524.75 29.5781,524.6406 C29.3594,524.4688 29.2188,524.2188 29.2188,523.9375 C29.2188,523.6563 29.375,523.3594 29.625,523.2031 C29.7813,523.1094 29.9063,523.0938 30.3438,523.0938 L37.9688,523.0938 L37.9688,525.6406 C37.9688,526.1094 37.9375,526.25 37.8281,526.4219 C37.6563,526.6406 37.3906,526.7813 37.125,526.7813 C36.8438,526.7813 36.5625,526.625 36.3906,526.375 C36.3125,526.2188 36.2813,526.0469 36.2813,525.6406 L36.2813,524.7813 L32.2969,524.7813 L32.2969,527.1875 L33.75,527.1875 L33.75,527.0625 C33.75,526.6094 33.7813,526.4531 33.8906,526.2813 C34.0625,526.0625 34.3281,525.9219 34.5781,525.9219 C35.0313,525.9219 35.3438,526.2344 35.4063,526.7031 C35.4219,526.8594 35.4219,526.9063 35.4219,527.0625 L35.4219,528.9844 C35.4219,529.4375 35.3906,529.5938 35.2656,529.75 C35.1094,529.9688 34.8438,530.1094 34.5938,530.1094 C34.2969,530.1094 34.0156,529.9531 33.8594,529.7031 C33.7813,529.5469 33.75,529.3906 33.75,528.9844 L33.75,528.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="48" y="532.1543">StatusKind</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="20" x2="117" y1="544" y2="544"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="25" y="558.2104">success</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="25" y="571.0151">failure</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="25" y="583.8198">processing</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="20" x2="117" y1="590.4141" y2="590.4141"/><!--MD5=[87a64bb4f7cf8289e3ea958cb604971b]
class IMessage--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="112.0234" id="IMessage" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="769.5" y="8"/><ellipse cx="827.25" cy="24" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M828.2031,20.7813 L828.2031,27.2969 L829.9219,27.2969 C830.375,27.2969 830.5156,27.3281 830.6875,27.4531 C830.9219,27.625 831.0313,27.875 831.0313,28.1563 C831.0313,28.7188 830.6719,29 829.9219,29 L824.7813,29 C824.375,29 824.1719,28.9531 824.0156,28.8281 C823.7969,28.6719 823.6563,28.4063 823.6563,28.1563 C823.6563,27.8594 823.8125,27.5781 824.0625,27.4219 C824.2188,27.3125 824.3438,27.2969 824.7813,27.2969 L826.5,27.2969 L826.5,20.7813 L824.7813,20.7813 C824.3594,20.7813 824.1719,20.75 824.0156,20.6406 C823.7969,20.4688 823.6563,20.2188 823.6563,19.9375 C823.6563,19.6563 823.8125,19.3594 824.0625,19.2031 C824.2188,19.1094 824.3438,19.0938 824.7813,19.0938 L829.9219,19.0938 C830.375,19.0938 830.5156,19.125 830.6875,19.2344 C830.9219,19.4063 831.0313,19.6719 831.0313,19.9375 C831.0313,20.2344 830.8906,20.5156 830.625,20.6719 C830.5,20.75 830.3125,20.7813 829.9219,20.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="58" x="847.75" y="28.1543">IMessage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="770.5" x2="950.5" y1="40" y2="40"/><ellipse cx="780.5" cy="51" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="789.5" y="54.2104">body: string</text><ellipse cx="780.5" cy="63.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="789.5" y="67.0151">recipient: string</text><ellipse cx="780.5" cy="76.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="789.5" y="79.8198">kind: MessageKind</text><ellipse cx="780.5" cy="89.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="789.5" y="92.6245">sender?: string | undefined</text><ellipse cx="780.5" cy="102.2188" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="789.5" y="105.4292">subject?: string | undefined</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="770.5" x2="950.5" y1="112.0234" y2="112.0234"/><!--MD5=[b47fb1d367be6c944b0a140b95ce2f68]
class IMessageWithId--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="86.4141" id="IMessageWithId" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="754" y="225"/><ellipse cx="807.25" cy="241" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M808.2031,237.7813 L808.2031,244.2969 L809.9219,244.2969 C810.375,244.2969 810.5156,244.3281 810.6875,244.4531 C810.9219,244.625 811.0313,244.875 811.0313,245.1563 C811.0313,245.7188 810.6719,246 809.9219,246 L804.7813,246 C804.375,246 804.1719,245.9531 804.0156,245.8281 C803.7969,245.6719 803.6563,245.4063 803.6563,245.1563 C803.6563,244.8594 803.8125,244.5781 804.0625,244.4219 C804.2188,244.3125 804.3438,244.2969 804.7813,244.2969 L806.5,244.2969 L806.5,237.7813 L804.7813,237.7813 C804.3594,237.7813 804.1719,237.75 804.0156,237.6406 C803.7969,237.4688 803.6563,237.2188 803.6563,236.9375 C803.6563,236.6563 803.8125,236.3594 804.0625,236.2031 C804.2188,236.1094 804.3438,236.0938 804.7813,236.0938 L809.9219,236.0938 C810.375,236.0938 810.5156,236.125 810.6875,236.2344 C810.9219,236.4063 811.0313,236.6719 811.0313,236.9375 C811.0313,237.2344 810.8906,237.5156 810.625,237.6719 C810.5,237.75 810.3125,237.7813 809.9219,237.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="827.75" y="245.1543">IMessageWithId</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="755" x2="966" y1="257" y2="257"/><ellipse cx="765" cy="268" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="774" y="271.2104">messageId: string</text><ellipse cx="765" cy="280.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="774" y="284.0151">timestamp?: number | undefined</text><ellipse cx="765" cy="293.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="179" x="774" y="296.8198">status?: StatusKind | undefined</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="755" x2="966" y1="303.4141" y2="303.4141"/><!--MD5=[a44095febb5c0f3dbcca6f71fb4ef835]
class Messenger--><rect fill="#FEFECE" filter="url(#f1ry2obt06vrik)" height="278.4844" id="Messenger" style="stroke: #A80036; stroke-width: 1.5;" width="558" x="153.5" y="416"/><ellipse cx="393.75" cy="432" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M396.0938,427.6719 L396.2656,427.75 C396.4844,427.4375 396.6875,427.3438 396.9844,427.3438 C397.2813,427.3438 397.5625,427.4844 397.7188,427.75 C397.8125,427.9063 397.8281,428.0313 397.8281,428.4688 L397.8281,429.8906 C397.8281,430.3125 397.7969,430.5 397.6875,430.6563 C397.5156,430.875 397.25,431.0156 396.9844,431.0156 C396.7656,431.0156 396.5313,430.9063 396.3906,430.7656 C396.25,430.6406 396.2188,430.5156 396.1563,430.1094 C396.0625,429.7031 395.8906,429.4844 395.4063,429.2031 C394.9375,428.9531 394.3281,428.7969 393.75,428.7969 C392.0156,428.7969 390.7656,430.1094 390.7656,431.8906 L390.7656,432.9844 C390.7656,434.6875 392.0625,435.7813 394.1094,435.7813 C394.875,435.7813 395.5625,435.6563 395.9844,435.3906 C396.1719,435.2969 396.1719,435.2969 396.625,434.8125 C396.8125,434.625 397.0156,434.5469 397.2344,434.5469 C397.7031,434.5469 398.0938,434.9375 398.0938,435.3906 C398.0938,435.7813 397.7656,436.2344 397.1875,436.6406 C396.4375,437.1875 395.2813,437.4844 394.0625,437.4844 C391.1719,437.4844 389.0625,435.5938 389.0625,433.0156 L389.0625,431.8906 C389.0625,429.1719 391.0625,427.0938 393.6875,427.0938 C394.5625,427.0938 395.1563,427.2344 396.0938,427.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="414.25" y="436.1543">Messenger</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="154.5" x2="710.5" y1="448" y2="448"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="456"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="173.5" y="462.2104">db: DynamoDB</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="468.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="173.5" y="475.0151">sns: SNS</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="481.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="173.5" y="487.8198">ses: SES</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="494.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="173.5" y="500.6245">dbTable: string</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="507.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="173.5" y="513.4292">snsArn: string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="154.5" x2="710.5" y1="520.0234" y2="520.0234"/><ellipse cx="164.5" cy="531.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="486" x="173.5" y="534.2339">list(recipient: string, sender: string, kind: MessageKind): Promise&lt;IMessageWithId[]&gt;</text><ellipse cx="164.5" cy="543.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="486" x="173.5" y="547.0386">save(message: SNSMessage): Promise&lt;PromiseResult&lt;PutItemOutput, AWSError&gt;&gt;</text><ellipse cx="164.5" cy="556.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="265" x="173.5" y="559.8433">send(message: SNSMessage): Promise&lt;any&gt;</text><ellipse cx="164.5" cy="569.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="324" x="173.5" y="572.6479">publish(message: IMessage): Promise&lt;IMessageWithId&gt;</text><ellipse cx="164.5" cy="582.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="290" x="173.5" y="585.4526">get(messageId: string): Promise&lt;IMessageWithId&gt;</text><ellipse cx="164.5" cy="595.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="346" x="173.5" y="598.2573">remove(messageId: string): Promise&lt;Record&lt;string, any&gt;&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="604.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="173.5" y="611.062">connectDb(): void</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="617.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="173.5" y="623.8667">connectSns(): void</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="630.4609"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="173.5" y="636.6714">connectSes(): void</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="643.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="532" x="173.5" y="649.4761">sendEmail(message: IMessage): Promise&lt;PromiseResult&lt;SendEmailResponse, AWSError&gt;&gt;</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="161.5" y="656.0703"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="508" x="173.5" y="662.2808">sendSms(message: IMessage): Promise&lt;PromiseResult&lt;PublishResponse, AWSError&gt;&gt;</text><ellipse cx="164.5" cy="671.875" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="208" x="173.5" y="675.0854">validateEmail(email: string): boolean</text><ellipse cx="164.5" cy="684.6797" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="216" x="173.5" y="687.8901">validatePhone(phone: string): boolean</text><!--MD5=[4406bb76df0a408b481b8998801c2e82]
reverse link IMessage to IMessageWithId--><path d="M860.5,140.301 C860.5,168.815 860.5,200.256 860.5,224.685 " fill="none" id="IMessage&lt;-IMessageWithId" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="853.5,140.197,860.5,120.197,867.5,140.197,853.5,140.197" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c3ba622c6833e05d8b81c65b5a72eaec]
link OauthOptions to TokenKind--><!--MD5=[3b7224e7af6f30c4b00bebd2026912e3]
link TokenKind to Token--><!--MD5=[5b80083796475f02e260f46ed4b5901f]
link OauthOptions to BasicAuth--><!--MD5=[d0ce4e0c4fd3832cb81173da3eae0f80]
link BasicAuth to Authorizer--><!--MD5=[ed3e5f1e62037cc6da13fc292053ef88]
link Authorizer to MessageKind--><!--MD5=[795c6ee437e2cc5196f112cbeb6f3e36]
link BasicAuth to StatusKind--><!--MD5=[df2f21c17e3aa456040cafafe0b21d8e]
link StatusKind to Messenger--><!--MD5=[72df4f3b8e0ee3f6b53cb9257e45aa4f]
@startuml
interface OauthOptions {
    +issuer: string
    +jwksUri: string
    +audience: string
}
enum TokenKind {
    Bearer
    Basic
    ApiKey
}
interface Token {
    +value: string
    +kind: TokenKind
}
interface BasicAuth {
    +username: string
    +password: string
}
class Authorizer {
    -apiKey: string
    -oauthOptions: OauthOptions
    +checkAuthorization(event: CustomAuthorizerEvent): Promise<any>
    -getHeader(event: CustomAuthorizerEvent, name: string): string
    -extractToken(event: CustomAuthorizerEvent): Token
    -getKey(kid: any): Promise<string>
    -verifyJwtToken(token: string, cert: string): Promise<any>
    -verifyScopes(payload: any): Promise<string>
    -verifyBasicAuth(token: string): Promise<BasicAuth>
    -verifyApiKey(apiKey: string): Promise<string>
}
enum MessageKind {
    sms
    email
}
enum StatusKind {
    success
    failure
    processing
}
interface IMessage {
    +body: string
    +recipient: string
    +kind: MessageKind
    +sender?: string | undefined
    +subject?: string | undefined
}
interface IMessageWithId extends IMessage {
    +messageId: string
    +timestamp?: number | undefined
    +status?: StatusKind | undefined
}
class Messenger {
    -db: DynamoDB
    -sns: SNS
    -ses: SES
    -dbTable: string
    -snsArn: string
    +list(recipient: string, sender: string, kind: MessageKind): Promise<IMessageWithId[]>
    +save(message: SNSMessage): Promise<PromiseResult<PutItemOutput, AWSError>>
    +send(message: SNSMessage): Promise<any>
    +publish(message: IMessage): Promise<IMessageWithId>
    +get(messageId: string): Promise<IMessageWithId>
    +remove(messageId: string): Promise<Record<string, any>>
    -connectDb(): void
    -connectSns(): void
    -connectSes(): void
    -sendEmail(message: IMessage): Promise<PromiseResult<SendEmailResponse, AWSError>>
    -sendSms(message: IMessage): Promise<PromiseResult<PublishResponse, AWSError>>
    +{static} validateEmail(email: string): boolean
    +{static} validatePhone(phone: string): boolean
}
@enduml

PlantUML version 1.2019.13(Tue Dec 10 17:18:29 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>